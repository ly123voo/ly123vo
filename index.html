<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>阿拉来抢购</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f0f0f0; text-align: center; padding: 20px; }
        .container { background-color: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); max-width: 600px; margin: auto; }
        input, textarea, button { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ccc; border-radius: 5px; }
        button { background-color: #28a745; color: #fff; cursor: pointer; }
        button:hover { background-color: #218838; }
        .history { margin-top: 20px; text-align: left; }
        .history-item { background-color: #e9ecef; margin: 10px 0; padding: 10px; border-radius: 5px; cursor: pointer; }
        .history-item pre { display: none; margin: 0; padding: 10px; background-color: #fff; border: 1px solid #ccc; border-radius: 5px; }
        .time-display { margin-top: 10px; font-size: 1.2em; }
    </style>
</head>
<body>
    <div class="container">
        <h1>阿拉来通杀</h1>
        <div class="form-group">
            <input type="text" id="interval" placeholder="循环间隔时间（毫秒）">
            <input type="number" id="sessionId" placeholder="LootActivitySessionID">
            <input type="number" id="prizeId" placeholder="LootActivitySessionPrizeID">
            <input type="text" id="startTime" placeholder="定时启动时间（格式: HH:MM:SS:SSS）">
            <div id="authorizationContainer">
                <input type="text" class="authorization" placeholder="Authorization令牌">
            </div>
            <button id="addAuthorizationButton">加一个账户</button>
            <button id="scheduleButton">定时启动</button>
            <button id="startButton">立即抢购</button>
            <button id="stopButton">结束抢购</button>
        </div>
        <div id="response" style="margin-top: 20px;"></div>
        <div class="history" id="history"></div>
        <div class="time-display" id="timeDisplay"></div>
    </div>
    <script>
        let _0x38854d, _0x40b917 = ![], _0x1d9ec5 = {}, _0x178c11, _0x49b612 = new Date();

        async function _0x116d92() {
            try {
                const _0x1b6d42 = await fetch('https://worldtimeapi.org/api/timezone/Asia/Shanghai');
                if (_0x1b6d42['ok']) {
                    const _0x2135b2 = await _0x1b6d42['json']();
                    return new Date(_0x2135b2['datetime']);
                } else return console['error']('无法获取北京时间'), new Date();
            } catch (_0x45dbe4) {
                return console['error']('请求错误:', _0x45dbe4), new Date();
            }
        }

        async function _0x4f2cf6() {
            _0x49b612 = await _0x116d92();
        }

        function _0x4ba045() {
            _0x49b612['setMilliseconds'](_0x49b612['getMilliseconds']() + 500);
            const _0x1d132a = document['getElementById']('timeDisplay');
            _0x1d132a['textContent'] = '北京时间: ' + _0x49b612['toLocaleString']('zh-CN', { 'hour12': ![] });
        }

        async function _0x228a2d(_0x50a99c, _0x493bb0, _0x111ca3) {
            try {
                const _0x56fdf8 = await fetch(_0x50a99c, {
                    'method': 'POST',
                    'headers': _0x493bb0,
                    'body': JSON['stringify'](_0x111ca3),
                    'timeout': 10000
                });
                if (_0x56fdf8['ok']) {
                    const _0x17eb14 = await _0x56fdf8['text'](),
                        _0x2ff45e = _0x17eb14['match'](/CachePrefix([^\s]{51})/);
                    return _0x2ff45e ? _0x2ff45e[1] : (console['log']('未找到匹配的字符串'), null);
                } else return console['log']('POST请求失败，状态码:', _0x56fdf8['status']), null;
            } catch (_0x1b1ae3) {
                return console['log']('请求错误:', _0x1b1ae3), null;
            }
        }

        async function _0x2ec30d(_0x184f2f, _0x154b13, _0x37b8e6) {
            try {
                const _0x5d0c37 = new URL(_0x184f2f);
                _0x5d0c37['search'] = new URLSearchParams(_0x37b8e6)['toString']();
                const _0x4489aa = await fetch(_0x5d0c37, {
                    'method': 'GET',
                    'headers': _0x154b13,
                    'timeout': 10000
                });
                return _0x4489aa['ok'] ? await _0x4489aa['text']() : (console['log']('GET请求失败，状态码:', _0x4489aa['status']), null);
            } catch (_0x2fd3ae) {
                return console['log']('请求错误:', _0x2fd3ae), null;
            }
        }

        async function _0x3c17f3(_0x543cd8, _0x3f5af9, _0x13ffad, _0x4c9120) {
            if (!_0x40b917) return;
            const _0x33e875 = 'https://gateway.allxf.top/lootactivityapi/OpenService/v1/Activity/QueueReceiveLootActivity',
                _0x3d87eb = 'https://gateway.allxf.top/lootactivityapi/OpenService/v1/Activity/GetQueueReceiveLootActivityResult';
            for (const _0x14622c of _0x3f5af9) {
                const _0x1b1665 = {
                        'Host': 'gateway.allxf.top',
                        'Authorization': _0x14622c,
                        'Content-Type': 'application/json;charset=UTF-8',
                        'Referer': 'https://m.allxf.top/'
                    },
                    _0x3675b5 = {
                        'LootActivitySessionID': _0x13ffad,
                        'LootActivitySessionPrizeID': _0x4c9120,
                        'BeaconVerifyParam': []
                    },
                    _0x18c618 = {
                        'Host': 'gateway.allxf.top',
                        'Authorization': _0x14622c,
                        'Content-Type': 'application/json;charset=UTF-8',
                        'Accept': 'application/json, text/plain, */*'
                    },
                    _0x482b11 = await _0x228a2d(_0x33e875, _0x1b1665, _0x3675b5);
                if (_0x482b11) {
                    const _0x5b9f15 = { 'QueueReceiveKey': 'LootActivity:QueueReceive:CachePrefix' + _0x482b11 },
                        _0x3c68e5 = await _0x2ec30d(_0x3d87eb, _0x18c618, _0x5b9f15);
                    if (_0x3c68e5) {
                        const _0x1d5957 = new Date()['toLocaleString']('zh-CN', { 'hour12': ![] }),
                            _0x11f14e = _0x1d5957 + '\n' + _0x3c68e5;
                        document['getElementById']('response')['innerHTML'] = '<pre>' + _0x11f14e + '</pre>', _0x5dc004(_0x11f14e), _0x44cc6b(_0x3c68e5);
                    }
                }
            }
            _0x38854d = setTimeout(() => _0x3c17f3(_0x543cd8, _0x3f5af9, _0x13ffad, _0x4c9120), _0x543cd8);
        }

        function _0x56eb1c() {
            if (_0x40b917) return;
            _0x40b917 = !![];
            const _0x247db5 = parseInt(document['getElementById']('interval')['value']),
                _0x48a6d1 = Array['from'](document['getElementsByClassName']('authorization'))['map'](_0x5a40b4 => _0x5a40b4['value']),
                _0x2bfa61 = parseInt(document['getElementById']('sessionId')['value']),
                _0x313c9f = parseInt(document['getElementById']('prizeId')['value']);
            _0x3c17f3(_0x247db5, _0x48a6d1, _0x2bfa61, _0x313c9f);
        }

        async function _0x2f4ce8() {
            if (_0x40b917) return;
            _0x40b917 = !![];
            const _0x43b5b5 = parseInt(document['getElementById']('interval')['value']),
                _0x33de16 = Array['from'](document['getElementsByClassName']('authorization'))['map'](_0x5048c8 => _0x5048c8['value']),
                _0x4026d8 = parseInt(document['getElementById']('sessionId')['value']),
                _0x248787 = parseInt(document['getElementById']('prizeId')['value']),
                _0x3d9d7c = document['getElementById']('startTime')['value'],
                [_0x5c3b87, _0x1bb58f, _0x2a3c8e, _0x23878a] = _0x3d9d7c['split'](':')['map'](Number),
                _0x161174 = await _0x116d92(),
                _0x302fe6 = new Date(_0x161174['getFullYear'](), _0x161174['getMonth'](), _0x161174['getDate'](), _0x5c3b87, _0x1bb58f, _0x2a3c8e, _0x23878a);
            _0x302fe6 < _0x161174 && _0x302fe6['setDate'](_0x302fe6['getDate']() + 1);
            const _0x56f43f = _0x302fe6 - _0x161174;
            _0x178c11 = setTimeout(() => { _0x3c17f3(_0x43b5b5, _0x33de16, _0x4026d8, _0x248787); }, _0x56f43f);
        }

        function _0x155aca() {
            _0x40b917 = ![], clearInterval(_0x38854d), clearTimeout(_0x178c11), _0x2edfa3();
        }

        function _0x5dc004(_0x1d50b6) {
            const _0x104264 = document['getElementById']('history'),
                _0x2e15c0 = document['createElement']('div');
            _0x2e15c0['classList']['add']('history-item'), _0x2e15c0['innerHTML'] = '<pre>' + _0x1d50b6 + '</pre>', _0x2e15c0['onclick'] = () => {
                const _0x353a2d = _0x2e15c0['querySelector']('pre');
                _0x353a2d['style']['display'] = _0x353a2d['style']['display'] === 'block' ? 'none' : 'block';
            }, _0x104264['appendChild'](_0x2e15c0);
        }

        function _0x44cc6b(_0x1d7a3e) {
            _0x1d9ec5[_0x1d7a3e] = (_0x1d9ec5[_0x1d7a3e] || 0x0) + 0x1;
        }

        function _0x2edfa3() {
            const _0x1d4c82 = document['getElementById']('response');
            _0x1d4c82['innerHTML'] = '<h3>请求统计:</h3>';
            for (const [_0x4d2fe8, _0x384aa6] of Object['entries'](_0x1d9ec5)) _0x1d4c82['innerHTML'] += '<p>' + _0x4d2fe8 + ': ' + _0x384aa6 + ' 次</p >';
        }

        _0x4f2cf6(), setInterval(_0x4f2cf6, 60000), setInterval(_0x4ba045, 500), document['getElementById']('startButton')['addEventListener']('click', _0x56eb1c), document['getElementById']('scheduleButton')['addEventListener']('click', _0x2f4ce8), document['getElementById']('stopButton')['addEventListener']('click', _0x155aca), document['getElementById']('addAuthorizationButton')['addEventListener']('click', () => {
            const _0x191e39 = document['getElementById']('authorizationContainer'),
                _0x1ae3a6 = document['createElement']('input');
            _0x1ae3a6['type'] = 'text', _0x1ae3a6['className'] = 'authorization', _0x1ae3a6['placeholder'] = 'Authorization令牌', _0x191e39['appendChild'](_0x1ae3a6);
        });
    </script>
</body>
</html>
